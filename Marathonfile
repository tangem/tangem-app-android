name: "Tangem Android UI Tests"
outputDir: "build/reports/marathon"

# Timeouts to prevent hung tests
testOutputTimeoutMillis: 180000   # 3 minutes 
testBatchTimeoutMillis: 600000    # 10 minutes 

vendorConfiguration:
  type: "Android"
  applicationApk: "app/build/outputs/apk/google/mocked/app-google-mocked.apk"
  testApplicationApk: "app/build/outputs/apk/androidTest/google/mocked/app-google-mocked-androidTest.apk"
  autoGrantPermission: true
  applicationPmClear: true
  testApplicationPmClear: true
  # wiremockBaseUrl redirects API calls from wiremock.tests-d.com to local WireMock
  # This is used on CI where each emulator has its own WireMock instance via adb reverse
  instrumentationArgs:
    wiremockBaseUrl: "http://localhost:8080"
  allureConfiguration:
    enabled: true
    # Kaspresso writes to /storage/emulated/0/Documents/allure-results/
    # Marathon will automatically collect from this path
    pathRoot: "EXTERNAL_STORAGE"
    relativeResultsDirectory: "Documents/allure-results"
  # Kaspresso handles screenshots via FailedStepScreenshotInterceptor - more granular (per step)

poolingStrategy:
  type: "omni"

batchingStrategy:
  type: "isolate"

sortingStrategy:
  type: "no-sorting"

retryStrategy:
  type: "fixed-quota"
  totalAllowedRetryQuota: 30
  retryPerTestQuota: 1

flakinessStrategy:
  type: "ignore"

# Filtering - uncomment to run specific test subsets
# filteringConfiguration:
#   allowlist:
#     - type: "annotation"
#       values: ["com.tangem.tests.SmokeTest"]
#   blocklist:
#     - type: "fully-qualified-class-name"
#       values: ["com.tangem.tests.FlakyTestClass"]

analyticsConfiguration:
  type: "disabled"

debug: false
